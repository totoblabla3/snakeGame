(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{16:function(e,t,n){e.exports={Food_dot:"Food_Food_dot__pDaQx"}},22:function(e,t,n){e.exports=n(34)},27:function(e,t,n){},28:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),c=n.n(o),s=(n(27),n(1)),i=n(12),u=n(2),l=n(18),h=n(13),d=n(19),p=n(3),f=n(4),k=(n(28),n(5)),v=n(6);function m(){var e=Object(k.a)(["\n    position: absolute;\n    width: 3.6%;\n    height: 3.6%;\n    background-color: #88c586;\n    border: 2px solid #424645;\n    margin: 0.4%;\n    z-index: 2;\n    left: ","%;\n    top: ","%;\n    animation-name : ",";\n    animation-duration: ","s;\n    animation-timing-function: linear;\n\n    @media (max-width: 440px) { \n      border: 1px solid #424645;\n      margin: 0.15%;\n    }\n"]);return m=function(){return e},e}function g(){var e=Object(k.a)(["\n    0% {\n        left: ","%;\n        top: ","%\n    }\n    100% {\n      left: ","%;\n      top: ","%\n    }\n"]);return g=function(){return e},e}var y=v.a.div(m(),(function(e){return e.dot[0]}),(function(e){return e.dot[1]}),(function(e){var t=e.dot,n=e.oldLength,a=e.i;return function(e,t){return Object(v.b)(g(),t[0],t[1],e[0],e[1])}(t,n[a]||[n[a-1]])}),(function(e){return e.speed/1e3})),b=function(e){var t=e.length,n=e.oldLength,a=e.speed,o=t.map((function(e,t){return r.a.createElement(y,{key:t,i:t,speed:a,dot:e,oldLength:n})}));return r.a.createElement("div",null,o)},O=n(16),w=n.n(O),_=function(e){var t=e.food;return r.a.createElement("div",{className:w.a.Food_dot,style:{left:"".concat(t[0],"%"),top:"".concat(t[1],"%")}})},S=n(17);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D="UP",L="DOWN",N="RIGHT",C="LEFT",P=function(){return[5*Math.floor(100*Math.random()/5),5*Math.floor(100*Math.random()/5)]},x=function(){function e(t){Object(p.a)(this,e),this.array=t}return Object(f.a)(e,[{key:"push",value:function(e){this.array.length<3&&this.array.push(e)}},{key:"getArray",value:function(){return this.array}},{key:"getCurrent",value:function(){return this.array[0]}},{key:"getLast",value:function(){return this.array[this.array.length-1]}},{key:"next",value:function(){var e=this.array.at(1);return e?(this.array.splice(0,1),e):this.array[0]}}]),e}(),A={snake:{pause:!1,directions_stack:[N],speed:200,oldLength:[[0,0],[0,0]],length:[[0,0],[5,0]]},items:{food:P()}},F=function(e){return JSON.parse(JSON.stringify(e))},U=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=F(A),n.game_cycle=void 0,n.handleKeyDown=function(e){switch(32===(e=e||window.event).keyCode&&(n.state.pause?n._play():n._pause()),e.keyCode){case 38:n.updateStack(D);break;case 40:n.updateStack(L);break;case 39:n.updateStack(N);break;case 37:n.updateStack(C);break;case 87:n.updateStack(D);break;case 83:n.updateStack(L);break;case 65:n.updateStack(C);break;case 68:n.updateStack(N)}},n}return Object(d.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){document.onkeydown=this.handleKeyDown,Object({NODE_ENV:"production",PUBLIC_URL:"/snakeGame"}).REACT_APP_DEV||(alert("On laptop: Use WASD or arrows. Press space to pause. \nOn touchscreen: Use swipes. Double tap to pause\n\nStart the game?"),this._play())}},{key:"componentDidUpdate",value:function(){this._checkBorder(),this._checkSnakeCollapse(),this._eatFood()}},{key:"_pause",value:function(){clearInterval(this.game_cycle),this.game_cycle=void 0,this.setState({pause:!0})}},{key:"_play",value:function(){var e=this;this.game_cycle=setInterval((function(){return e._moveSnake()}),this.state.snake.speed),this.setState({pause:!1})}},{key:"_checkBorder",value:function(){var e=this.state.snake.length,t=e[e.length-1];(t[0]>=100||t[1]>=100||t[0]<0||t[1]<0)&&this._gameOver()}},{key:"_checkSnakeCollapse",value:function(){var e=this,t=Object(u.a)(this.state.snake.length),n=t[t.length-1];t.pop(),t.forEach((function(t){t[0]===n[0]&&t[1]===n[1]&&e._gameOver()}))}},{key:"_eatFood",value:function(){var e=this.state.items.food,t=Object(u.a)(this.state.snake.length),n=Object(u.a)(this.state.snake.oldLength),a=t[t.length-1];e[0]===a[0]&&e[1]===a[1]&&(t.unshift(n[0]),n.unshift(n[0]),this.setState({items:{food:P()},snake:E({},this.state.snake,{length:t,oldLength:n})}))}},{key:"updateStack",value:function(e){if(!this.state.pause){var t=this.state.snake.directions_stack,n=new x(t),a=n.getLast();switch(e){case D:a!==L&&a!==D&&n.push(D);break;case L:a!==D&&a!==L&&n.push(L);break;case N:a!==C&&a!==N&&n.push(N);break;case C:a!==N&&a!==C&&n.push(C)}this.setState({snake:E({},this.state.snake,{directions_stack:n.getArray()})})}}},{key:"_moveSnake",value:function(){var e=this.state.snake,t=e.directions_stack,n=e.length,a=new x(t),r=Object(u.a)(this.state.snake.length),o=n[n.length-1];switch(a.next()){case D:o=[o[0],o[1]-5];break;case L:o=[o[0],o[1]+5];break;case N:o=[o[0]+5,o[1]];break;case C:o=[o[0]-5,o[1]]}r.push(o),r.shift(),this.setState({snake:E({},this.state.snake,{length:r,oldLength:n,directions_stack:a.getArray()})})}},{key:"getScore",value:function(){return this.state.snake.length.length-2}},{key:"_gameOver",value:function(){alert("Game over\n Score: ".concat(this.getScore())),this.setState(F(A))}},{key:"render",value:function(){var e=this,t=this.state,n=t.pause,a=t.snake,o=a.length,c=a.oldLength,s=a.speed,i=t.items.food;return r.a.createElement(M,{onSwipe:function(t){return e.updateStack(t)}},r.a.createElement(B,{onDoubleClick:function(){return n?e._play():e._pause()}},r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"score"},"Score: ",this.getScore()),r.a.createElement("div",{className:"pause"},n?r.a.createElement("div",{onClick:function(){return e._play()}},"play"):r.a.createElement("div",{onClick:function(){return e._pause()}},"pause"))),r.a.createElement("div",{className:"Map"},r.a.createElement(b,{speed:s,oldLength:c,length:o}),r.a.createElement(_,{food:i}))))))}}]),t}(a.Component),M=function(e){var t=e.children,n=e.onSwipe,a=Object(S.a)({onSwipedUp:function(){return n(D)},onSwipedDown:function(){return n(L)},onSwipedLeft:function(){return n(C)},onSwipedRight:function(){return n(N)}});return r.a.createElement("div",Object.assign({},a,{className:"wrapper"}),t)},B=function(e){var t=e.children,n=e.onDoubleClick,o=void 0===n?function(){return null}:n,c=e.delay,i=void 0===c?250:c,u=Object(a.useState)(0),l=Object(s.a)(u,2),h=l[0],d=l[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){return d(0)}),i);return 2===h&&o(),function(){return clearTimeout(e)}}),[h]),r.a.createElement("div",{className:"wrapper",onClick:function(){return d((function(e){return e+1}))}},t)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[22,1,2]]]);
//# sourceMappingURL=main.245d0465.chunk.js.map